# 上传获取图片宽高

## dom 元素

```html
<input
  type="file"
  autocomplete="off"
  id="upload_img"
  name="Uploadfile"
  onchange="getImageWidth()"
/>
```

## js 逻辑

```js
function getImageWidth() {
  var MyTest = document.getElementById("upload_img").files[0];
  const arr = new Array(100000).fill(1);
  console.log(MyTest);
  var reader = new FileReader();
  let start = new Date();
  console.log("start", new Date().getTime());
  reader.readAsDataURL(MyTest);
  reader.onload = function(theFile) {
    console.log("reader onload", new Date() - start);
    var image = new Image();
    image.src = theFile.target.result;
    image.onload = function() {
      console.log("image onload", new Date() - start);
      console.log("图片的宽度为" + this.width + ",长度为" + this.height);
    };
  };
  arr.forEach((element) => {
    return (element * 100 + 2) / 100;
  });
}
```
