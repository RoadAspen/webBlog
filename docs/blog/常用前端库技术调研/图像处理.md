# 图像处理

最近 AIGC 大火，结合 AIGC 的能力，我们基于 Konva 和 PiXi，实现了图像预处理功能，包括图像缩放、旋转、裁剪、滤镜、涂鸦等功能，交由 AI 模型处理，最终得到处理后的图像。

前端负责的部分主要是 `图形编辑器`,导入图片及绘制图形，以及 AI 模型处理后的图像展示，因此调研了目前市面上比较热门的两个图像处理工具。

> 前端 2D 和 3D 图形绘制， 常用的库有 Konva、PiXi 等。

### konva

konva 是一个开源的 JavaScript 库，用于在 HTML5 Canvas 上绘制 2D 图形。主要是基于 canvas 创建非常有交互性的 Canvas 应用，如 图形编辑器、游戏等。

### PiXi

使用 WebGL 渲染，更专注于游戏开发和高性能图形渲染，因此在创建游戏、动画和其他需要快速渲染的图形应用时更为流行。

### 对比

| 工具       | Konva                                                                                                           | PiXi                                                                                         |
| ---------- | --------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- |
| 受众       | 主要面向开发者创建具有丰富交互功能的 Canvas 应用，如图形编辑器、游戏等                                          | 更专注于游戏开发和高性能图形渲染，因此在创建游戏、动画和其他需要快速渲染的图形应用时更为流行 |
| 渲染引擎   | 基于 HTML5 Canvas API，因此其渲染性能可能不如 WebGL                                                             | 使用 WebGL 进行渲染，因此在处理大量元素和复杂图形时性能更高。                                |
| 功能和特性 | 提供了丰富的图形和交互功能，包括图形绘制、文本、动画、事件处理、拖放等                                          | 更专注于图形渲染，提供了丰富的渲染功能和特效，但在交互性方面可能略逊于 Konva                 |
| 学习曲线   | 相对而言，Konva 的学习曲线可能较为平缓，因为它建立在 HTML5 Canvas 之上，对于熟悉 Web 开发的开发者来说更容易上手 | 使用 WebGL 进行渲染，因此在处理大量元素和复杂图形时性能更高。                                |
| 社区和支持 | 虽然其社区相对较小，但仍然活跃，提供了不少文档和示例                                                            | 拥有更庞大的社区和更多的资源，因为它是一个专业的游戏开发库，有大量的游戏开发者使用和贡献。   |

在选择工具时，需要根据项目的需求和特点进行选择。如果项目需要快速开发具有丰富交互功能的 Canvas 应用，那么选择 Konva 是一个不错的选择。如果项目需要处理大量元素和复杂图形，并且需要高性能的渲染，那么选择 PiXi 是一个不错的选择。

在我们的项目中，主要是对图像做预处理，比如 裁剪、缩放、旋转、涂鸦、画笔、橡皮、选中、取消、框选等 2D 操作，学习曲线平滑，后期维护起来更容易。因此选用了 Konva 作为底层图形绘制工具依赖。
