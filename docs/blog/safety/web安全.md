# web 安全

对 web 浏览器访问服务端做出干扰用户操作、获取用户信息、假装用户操作、操作数据库等行为，提高 web 安全防护知识，有助于做出更好的 web 应用，让应用更加安全。

## 一、CSRF

跨站请求伪造，主要利用**form 表单不存在跨域，而且会携带 form action 的地址的 cookie**。

**攻击条件：**

1. 你在浏览器内访问了攻击者想要获取你信息的网站（如银行网站）
2. 你在同一浏览器内访问了攻击者的网站。
3. 攻击者通过隐藏的 form 表单，action 指向你访问过的网站的一个 url（可能是一个付款接口，也可能是一个），这个请求会携带银行网站的 cookie（此 cookie 中包含了你的信息），冒充你的名义发起请求，致使你的信息泄露或者财产损失。

**解决方法：** 原始表单在生成时添加一个隐藏的 input，value 为一个随机序列号，后端将序列号存储在数据库中，提交时序列号一起提交给后台，后台会验证该表单的序列号是否为后端生成的，攻击者的 form 是无法获取后台生成的序列号，所以。

## 二、XSS

主要利用在表单中插入 js 脚本，在其他用户访问该页面时，以你的名义发送请求。

**攻击条件：**

1. 这个主要是在于**攻击者在网站的表单中输入了可以被浏览器执行的 html，css，javascript 等代码，浏览器解析行内脚本的方式决定了它在看到字符串 </script> 时，会将其当成结束的 </script>
   标签。想避免这个问题，只需要转义字符“\”**。
2. 前端和服务端在没有识别的情况下直接存入数据库中。
3. 当网站其他人访问这个攻击者的博客页面时，服务端将数据库中的代码包含在 html 中发送给前端，浏览器在解析 html 时直接解析了攻击者的代码。

**解决方法：** 将所有用户输入的特殊符号如 < > = 等全部编码，用 unicode 编码代替。

## 三、SQL 注入

主要利用在输入表单中输入可操作数据库的 sql 语句。

**攻击条件：**

1. 这个主要是在于**攻击者在网站的表单中输入了可以被服务器执行的 SQL 代码**。
2. 前端和服务端在没有识别的情况下直接存入数据库中。
3. 服务端存入数据库需要编写 SQL 语句，那么攻击者输入的 SQL 代码就会劫持服务端的 SQL 代码，攻击者就可以对数据库做 删除、修改、新增等攻击操作。

**解决方法：** 将所有用户输入的特殊符号如 < > = 等全部编码，用 unicode 编码代替。

## 四、点击劫持

通过透明化跟随鼠标，劫持用户点击操作。这种攻击手段主要是利用视频、按钮、图片等引诱被攻击者点击。实际点击的是上一层透明化的元素，这种方法造成的后果不是很严重。

**解决方法：** 尽量不要点击有诱惑性的按钮和图片。
