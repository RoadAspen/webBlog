# 浏览器输入网址

## 流程

1. 在浏览器客户端输入 URL。
2. 客户端发送 url 到 DNS 服务器解析获得对应 WEB 服务器的 IP 地址。
3. 客户端与 WEB 服务器 三次握手 建立 TCP（传输控制协议）连接。
4. 客户端发向对应 IP 地址发送相应的 http 或者 https 请求。
5. WEB 服务器做出相应，返回指定的 URL 数据或者错误信息：如果重定向，则重定向到新的 URL 地址。
6. 四次挥手 关闭 TCP 连接。
7. 客户端下载数据，开始解析 HTML 源文件。
8. 分析页面中的超链接，继续发送请求，下载资源文件。
9. html 文档解析完成，浏览器渲染界面。
10. 等待用户执行自由操作。

## DNS 解析

-   查找浏览器缓存,浏览器会保存之前访问过的一些网站 DNS（域名系统 英文：Domain Name System）信息。

-   如果浏览器缓存没找到对应的 ip,浏览器发送一个请求到路由器,然后在路由器缓存上查找记录,路由器一般也存有 DNS 信息.

-   如果还没有,请求将发送到 ISP(Internet Service Provider,互联网服务提供商) ,互联网服务提供商会有相应的 DNS 服务器,再看 ISP 的 DNS 缓存.

-   解析域名,返回 ip 给浏览器.(解析域名 www.baidu.com,首先解析.com 的域名,然后跑到管理.com 的服务器上进一步查询,然后是.baidu,最后是 www,所以域名结构是:三级域名.二级域名.一级域名。)

## 建立 TCP 连接

HTTP 包的传输是依靠 TCP 的传输，三次握手,建立 TCP 连接.

## 发送 http 请求.

TCP 连接建立成功之后，浏览器发送 http 请求包括 GET/POST、url、协议、浏览器头、cookies 信息等

## 服务器收到浏览器请求后,向客户机发送 HTTP 响应报文

包括 HTTP 版本、事件、cookies 等，并查找请求的资源是否存在响应，返回 index.html 或者 其他相应的资源

## 浏览器解析渲染页面

当服务器返回响应之后，浏览器读取关于这个响应的说明书（响应头），然后开始解析这个响应并在页面上显示出来。

## 关闭 TCP 连接

当数据完成请求到返回的过程之后，根据 Connection 的 Keep-Alive 属性可以选择是否断开 TCP 连接,四次挥手释放.
