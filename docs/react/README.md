# 为什么学习 React 源码

1. 通过学习开源框架、开源项目的源码，我们可以学习到多种场景多种技术的解决方案，快速增加经验；
2. 在使用某个框架或工具进行开发时，如果你对其源码有所了解，可以最大化地减少出故障的可能；
3. 有利于你研究一个新系统的代码逻辑，快速接手一个新系统；
4. 最大的好处是可以开阔思维，提升架构设计能力，通过看源码，看别人如何设计，然后思考为何这样设计才能领悟到。

## 怎么学习源码

那么如何阅读源码呢？

1. 在你看某一个框架的源码前，先去 Google 查找这个开源框架的官方介绍，通过资料了解该框架有几个模块，各个模块是做什么的，之间有什么联系，每个模块都有哪些核心类，在阅读源码时可以着重看这些类。
2. 对哪个模块感兴趣就去写个小 demo，先了解一下这个模块的具体作用，然后再 debug 进入看具体实现。
3. 在 debug 的过程中，第一遍是走马观花，简略看一下调用逻辑，都用了哪些类；第二遍需有重点地 debug，看看这些类担任了架构图里的哪些功能，使用了哪些设计模式。
4. 第二遍有感觉了，便大致知道了整体代码的功能实现，但是对整体代码结构还不是很清晰，毕竟代码里面多个类来回调用，很容易遗忘当前断点的来处；
5. 那么你可以进行第三遍 debug，这时候你最好把主要类的调用时序图以及类图结构画出来，等画好后，再对着时序图分析调用流程，就可以清楚地知道类之间的调用关系，而通过类图可以知道类的功能以及它们相互之间的依赖关系。
6. 开源框架里面每个功能类或者方法一般都有注释，这些注释是一手资料，比如 JUC 包里的一些并发组件的注释，就已经说明了它们的设计原理和使用场景。
7. 在阅读源码时，最好画出时序图和类图，因为人总是善忘的。如果隔一段时间你再去看之前看过的源码，虽然有些印象，但当你想去看某个模块的逻辑时，又需根据 demo 再从头 debug 了。而如果有了这俩图，就可以从这俩图里面直接找，并且看一眼时序图就知道整个模块的脉络了。
8. 此外，查框架使用说明最好去官网查（这些信息是源头，是没有经过别人翻译的），虽然是英文，但是看久了就好了，毕竟还有 Google 翻译呐！
   当然研究代码时不一定非要 debug 三遍，其实这里说的是三种掌握程度，如果你 debug 一遍就能掌握，那自然更好啦。

## React 源码

本文基于 16.8 版本。

React 原理最核心的部分：

1. 更新机制。
2. 什么是 fiber 以及 fiber 的作用
3. React 是如何实现调度更新的

在我们深入的了解 React 原理之后，再回过头来去思考我们的程序改如何写，如何利用特性去优化：

1. hooks 的应用
2. 批量更新
3. immer 数据
